{% load static %}

<!DOCTYPE html>
<html>
	<head>
		<title>Chat</title>
		<!-- Bootstrap -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" >
		<!-- Font awesome -->
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" >
		<!-- CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/chathome.css' %}">
	<link rel="shortcut icon" type="image/png" href="static/img/favicon.png">
	<!-- google font -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="{% static 'css/all.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/owl.carousel.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/animate.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/meanmenu.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/responsive.css' %}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
<script>
	$(document).ready(function() {
    $('.popup-youtube').magnificPopup({
        type: 'iframe',
        mainClass: 'mfp-fade',
        removalDelay: 160,
        preloader: false,
        fixedContentPos: false
    });
});

function toggleChatWidget() {
    var chatWidget = document.getElementById("chatwidget2");
    if (chatWidget.style.display === "none") {
        chatWidget.style.display = "block";
    } else {
        chatWidget.style.display = "none";
    }
}

</script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

<style>
	html, body{
	height: 100%;
	}
.hero-area {
    position: relative;
    overflow: hidden;
}

.video-background {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    z-index: 1;
}

.container {
    position: relative;
    z-index: 2;
}

/* Style the popup button */
.button {
  cursor: pointer;
}

/* Style the popup menu content - hidden by default */
.popup-menu {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  padding: 12px 16px;
  z-index: 1;
}


.cart-btn{
  background-image: url("{% static 'css/images/fireimage.png' %}"); /* Default image */
  image-width: 100px;
  image-height: 100px;
  background-size: cover; /* Ensure image covers the button */
  position: relative; /* Needed for proper stacking */
}

.cart-btn:hover {
  background-image: url("{% static 'css/images/invertedfireimage.png' %}"); /* Hover image path */
  opacity: 1; /* Ensure hover image is fully visible */
}


    .hero-text-tablecell {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 1;
    }
	#sticker {
    position: fixed;
    width: 100%;
    transition: background 1s;
}

	.contented{
	background: url("{% static 'css/images/blue-message-text-bubble.png' %}");
	}

	.image-container {
    position: relative;
    display: inline-block; /* Ensures the size adjusts to the image */
    width: 100px;
    height: 100px;
}

.image-container img {
    width: 100%;
    height: 100%;
    display: block;
}

.image-container h3 {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white; /* Change to a contrasting color */
    font-size: 14px; /* Adjust font size as needed */
    background-color: rgba(0, 0, 0, 0.5); /* Optional: Add a background for better readability */
    padding: 5px; /* Optional: Add padding */
    border-radius: 5px; /* Optional: Add rounded corners */
    text-align: center;
}

</style>
<script>
window.onscroll = function() {
    var sticker = document.getElementById('sticker');
    if (window.pageYOffset > window.innerHeight / 2) {
        sticker.style.background = 'rgba(0, 0, 0, 1)';
    } else {
        sticker.style.background = 'linear-gradient(rgba(0, 0, 0, 1), rgba(0,0,0,0))';
    }
};
</script>
		<style>
.interface{
  text-align: center;
  justify-content: center;
  flex-direction: row;
  padding-top: 8%;
}

  input[type=text], select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  }

  input[type=submit] {
  width: 100%;
  background-color: #4CAF50;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 15px;
  cursor: pointer;
  }

  input[type=submit]:hover {
  background-color: #45a049;
  opacity: 0.5;
  }



  .container {
    border: 2px solid #dedede;
    background-color: #f1f1f1;
    border-radius: 25px;
    padding: 10px;
    opacity: 0.7;
    margin: 10px 0;
    justify-content: center;
    align-items: center;
    margin-left: auto;
    margin-right: auto;
    margin-top: auto;
  }

  .darker {
    border-color: #ccc;
    background-color: #ddd;
  }

  .container::after {
    content: "";
    clear: both;
    display: table;
  }

  .container img {
    float: left;
    max-width: 60px;
    margin-right: 20px;
    border-radius: 50%;
  }

  .container img.right {
    float: right;
    margin-left: 20px;
    margin-right:0;
  }

  .time-right {
    float: right;
    color: #aaa;
  }

  .time-left {
    float: left;
    color: #999;
  }
button[type="submit"] {
    background-color: rgba(0, 0, 0, 0.4);
    color: white;
    height: 35px;
    margin-right: 0px;
    margin-top: 8px;
    border: none;

    padding: 0 10px;  /* Adjust padding as needed */
    border-radius: 0px 8px 8px 0px; /* Top-left, Top-right, Bottom-right, Bottom-left */
    cursor: pointer;
}
      </style>

	</head>


	<body>


	<div class="top-header-area" id="sticker" style="background: linear-gradient(rgba(0, 0, 0, 1) 5%, rgba(0,0,0,0));">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-sm-12 text-center">
					<div class="main-menu-wrap">
						<!-- logo -->
						<div class="site-logo">
							<a href="index.html">
							{% for BackgroundView in Logo %}
								{% if BackgroundView.page == 'index.html' %}
								<a class="logo" href="{{BackgroundView.hyperlink}}">
								  <img class="imageicon" src="{{BackgroundView.logocover.url}}"
										alt="{{BackgroundView.alternate}}" style="length: {{BackgroundView.length_for_resize}}px; width: {{BackgroundView.width_for_resize}}px;"></a>
								{% endif %}
							{% endfor %}
							</a>
						</div>
						<!-- logo -->

						<!-- menu start -->
						<nav class="main-menu">
							<ul>
							  {% for column in Header %}

      <li class="current-list-item"><a href="#{{ column.section }}">{{ column.text }}</a>
									<ul class="sub-menu">
										{% for row in DropDown %}
          {% if row.row == column.row %}
            {% if row.url == 'http://127.0.0.1:8000/profile' %}
              {% if row.opennew %}
										<li> <a href="{{ profile_url }}" target="_blank">{{ row.text }}</a></li>
              {% else %}
										<li> <a href="{{ profile_url }}">{{ row.text }}</a></li>
              {% endif %}
            {% else %}
              {% if row.opennew %}
										<li><a href="{{ row.url }}" target="_blank">{{ row.text }}</a></li>
              {% else %}
										<li><a href="{{ row.url }}">{{ row.text }}</a></li>
              {% endif %}
            {% endif %}
          {% endif %}
        {% endfor %}
									</ul>
        {% endfor %}
								</li>
								<li>
									<div class="header-icons" style="display: flex; flex-direction: right;">
										<a class="shopping-cart" href="{% url 'showcase:ehome' %}">
											<img src="{% static 'css/images/cart.png' %}" style="width: 15px; height: 15px;">
										</a>
										<a class="mobile-hide search-bar-icon" href="#"><img src="{% static 'css/images/search-icon.png' %}" style="width: 20px; height: 15px;"></a>
									</div>



								</li>
								<li style="display: flex; align-items: center;">
									{% for userprofile in Profiles %}
									{% if userprofile.newprofile_profile_picture_url %}
									<a href="{{ userprofile.newprofile_profile_url }}">
										<img src="{{ userprofile.newprofile_profile_picture_url }}" alt="Profile Picture" width="50" height="50" style="border-radius: 50px; margin-right: 20px;">
									</a>
									{% else %}
									<!-- Placeholder image or default avatar -->
									<img src="{% static 'css/images/a.jpg' %}" alt="Default Avatar" width="50" height="50" style="border-radius: 50px;">
									{% endif %}
									<a href="{% url 'showcase:currencymarket' %}">
									<h3 class="currency_designation" style="text-align: center; space-between: 5px;">{{userprofile.currency_amount}} {{userprofile.currency}}</h3>
									</a>
										{% endfor %}
								</li>
							</ul>
						</nav>
						<a class="mobile-show search-bar-icon" href="#"><i class="fas fa-search"></i></a>
						<div class="mobile-menu"></div>
						<!-- menu end -->
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- end header -->

	<!-- search area -->
<div class="search-area">
    <div class="container">
       <div class="row">
          <div class="col-lg-12">
             <span class="close-btn"><img src=""></i></span>
             <div class="search-bar">
                <div class="search-bar-tablecell">
                   <h3>What are you looking for?</h3>
                   <form action="{% url 'showcase:pagesearch' %}" method="post">
                       {% csrf_token %}
                       <input type="text" name="search_query" placeholder="Keywords">
                       <select name="search_type">
                           <option value="text">Text</option>
                           <option value="url">URL</option>
                       </select>
                       <button type="submit">Search <i class="fas fa-search"></i></button>
                   </form>
                </div>
             </div>
          </div>
       </div>
    </div>
</div>


		<div class="container-fluid h-100">
			<div class="row justify-content-center h-100">
				<div class="col-md-4 col-xl-3 chat"><div class="card mb-sm-3 mb-md-0 contacts_card">
					<div class="card-header">
                        <form action="{% url 'showcase:home' %}" method="get">
                            <div class="input-group">
                                <input type="text" placeholder="Search..." name="search" class="form-control search" style="height: 35px;">
                                <div class="input-group-prepend">
                                    <button type="submit">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                        <div class="add-friend" style="font-color: white;">
                            <a href="{% url 'showcase:send_friend_request' %}" style="color: white;">
                                Add Friend
                            </a>
                        </div>
					</div>
					<div class="card-body contacts_body">
            <ul class="contacts">

  {% if search_results %}
     {% for friend in search_results %}

     									{% if friend.currently_active %}
                <a href="{{friend.user_profile_url}}">
              <li class="active" style="padding-top: 12px;">
                  {% else %}
                  <li>
                  {% endif %}
          <div class="d-flex bd-highlight">
              <div class="img_cont">
                  {% if friend.profile_picture_url %}

                      <a href="{{friend.user_profile_url}}">
                          <img src="{{ friend.profile_picture_url }}" class="rounded-circle user_img">
                      <span class="online_icon"></span>
                      </a>
                  {% endif %}
              </div>
              <div class="user_info">
                  <span>{{ friend.username }}</span>
                  {% if friend.online == True %}
                      <p>Online</p>
                  {% else %}
                      <p>Offline</p>
                  {% endif %}
              </div>
          </div>
      </li>
</a>
    {% endfor %}
{% else %}
  {% for friend in item_list %}

                <a href="{{friend.user_profile_url}}">
      <li class="active">
          <div class="d-flex bd-highlight">
              <div class="img_cont">
                  {% if friend.profile_picture_url %}
                      <a href="{{friend.user_profile_url}}">
                          <img src="{{ friend.profile_picture_url }}" class="rounded-circle user_img">
                      <span class="online_icon"></span>
                      </a>
                  {% endif %}
              </div>
              <div class="user_info">
                  <span>{{ friend.username }}</span>
                  {% if friend.online == True %}
                      <p>Online</p>
                  {% else %}
                      <p>Offline</p>
                  {% endif %}
              </div>
          </div>
      </li>
                </a>
              {% empty %}
                  {% for friend in friends_data %}
                <a href="{{friend.user_profile_url}}">
									{% if friend.currently_active %}
              <li class="active" style="padding-top: 12px;">
                  {% else %}
                  <li>
                  {% endif %}
          <div class="d-flex bd-highlight">
              <div class="img_cont">
                  {% if friend.profile_picture_url %}
                      <a href="{{friend.user_profile_url}}">
                          <img src="{{ friend.profile_picture_url }}" class="rounded-circle user_img">
                      <span class="online_icon"></span>
                      </a>
                  {% endif %}
              </div>
              <div class="user_info">
                  <span>{{ friend.username }}</span>
                  {% if friend.online == True %}
                      <p>Online</p>
                  {% else %}
                      <p>Offline</p>
                  {% endif %}
              </div>
          </div>
                </li></a>
  {% empty %}
      <h2>No friends found.</h2>
  {% endfor %}
  {% endfor %}
{% endif %}
            </ul>
          </div>

				</div></div>
				<div class="col-md-8 col-xl-6 chat">
					<div class="card">
						<div class="card-header msg_head">
							<div class="d-flex bd-highlight">
							{% for newprofile in Profiles %}
								<div class="img_cont">
									{% if newprofile.newprofile_profile_picture_url %}
									<img src="{{ newprofile.newprofile_profile_picture_url }}" class="rounded-circle user_img">
									{% else %}
									<!-- Placeholder image or default avatar -->
									<img src="{% static 'css/images/a.jpg' %}" alt="Default Avatar" width="50" height="50" style="border-radius: 50px; class="rounded-circle user_img">
									{% endif %}
									<span class="online_icon"></span>
								</div>
							{% endfor %}

								<div class="user_info">

									<span>{{user.username}}</span>
									<p>My Communities</p>
								</div>
								<div class="video_cam">
									<span><i class="fas fa-video"></i></span>
									<span><i class="fas fa-phone"></i></span>
								</div>
							</div>
							<span id="action_menu_btn"><i class="fas fa-ellipsis-v"></i></span>
							<div class="action_menu">
								<ul>
									<li><i class="fas fa-user-circle"></i> View profile</li>
									<li><i class="fas fa-users"></i> Add to close friends</li>
									<li><i class="fas fa-plus"></i> Add to group</li>
									<li><i class="fas fa-ban"></i> Block</li>
								</ul>
							</div>
						</div>
						<div class="card-body msg_card_body">
							<div class="d-flex justify-content-start mb-4">
								    <div class = "room">
      <form id="post-form" method="POST" action="checkview">
          {% csrf_token %}
		  <label style="text-align: center;"><b style="color: white;">Room Name</b></label>
          <input style="text-align: center;" type="text" name="room_name" id="room_name" width="100px" />
          <label style="margin-top: 20px;"><b style="color: white;">Username</b></label>
          <input type="text" name="username" id="username" width="100px" />
          <input type="submit" value="Enter Room">
      </form>
    </div>
  </div>
  </div>
  </div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	<!-- JQuery -->
     <script type="text/javascript" src="{% static 'css/js/chat.js' %}"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	</body>
</html>

